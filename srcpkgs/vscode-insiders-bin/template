# Template file for 'vscode-insiders-bin'
pkgname=vscode-insiders-bin
version=20190204
revision=1
wrksrc="VSCode-linux-x64"
only_for_archs="x86_64"
depends="GConf libXtst libxkbfile nss dejavu-fonts-ttf"
short_desc="Microsoft Visual Code Insiders for Linux"
maintainer="shizonic <realtiaz@gmail.com>"
license="MIT"
homepage="https://code.visualstudio.com/"
distfiles="https://vscode-update.azurewebsites.net/latest/linux-x64/insider>${pkgname}-x64-${version}_${revision}.tar.gz"
checksum=d594e1da9d3f06f5bbf38f75862db5eb054fd5003fabad2e6201dbdd0c047cf0
nostrip_files="code-insiders"

do_install() {
	vmkdir usr/lib/code-insiders
	vcopy ../VSCode-linux-x64/* usr/lib/code-insiders

	vmkdir usr/bin
	ln -sf /usr/lib/code-insiders/bin/code-insiders ${DESTDIR}/usr/bin/

	vmkdir usr/share/applications
	vinstall ${FILESDIR}/code-insiders.desktop 644 usr/share/applications

	vmkdir usr/share/pixmaps
	vinstall resources/app/resources/linux/code.png 644 usr/share/pixmaps code-insiders.png

	vlicense resources/app/LICENSE.txt
}
